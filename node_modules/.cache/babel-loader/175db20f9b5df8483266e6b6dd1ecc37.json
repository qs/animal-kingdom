{"ast":null,"code":"'use strict'; // OP_RETURN {aa21a9ed} {commitment}\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nconst bscript = require('../../script');\n\nconst script_1 = require('../../script');\n\nconst types = require('../../types');\n\nconst typeforce = require('typeforce');\n\nconst HEADER = Buffer.from('aa21a9ed', 'hex');\n\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return buffer.length > 37 && buffer[0] === script_1.OPS.OP_RETURN && buffer[1] === 0x24 && buffer.slice(2, 6).equals(HEADER);\n}\n\nexports.check = check;\n\ncheck.toJSON = () => {\n  return 'Witness commitment output';\n};\n\nfunction encode(commitment) {\n  typeforce(types.Hash256bit, commitment);\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n  return bscript.compile([script_1.OPS.OP_RETURN, buffer]);\n}\n\nexports.encode = encode;\n\nfunction decode(buffer) {\n  typeforce(check, buffer);\n  return bscript.decompile(buffer)[1].slice(4, 36);\n}\n\nexports.decode = decode;","map":null,"metadata":{},"sourceType":"script"}